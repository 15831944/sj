class([stack]m'math:)'class {
  this
}

class_bar([heap]x'i32:)'i32 {
  [heap]class_foo([stack]this : class_foo(
    parent: [stack]this,
    [heap]x'i32 : this.x
  ))
}

class_foo([heap]x'i32:)'i32 {
  if this.x > 0i {
    [heap]class_bar([stack]this : class_bar(
      parent: [stack]this,
      [heap]x'i32 : math_sub([stack]this : math_sub(
        [heap]x'i32 : this.x,
        [heap]y'i32 : 1i
      ))
    ))
  } else {
    0i
  }
}

math()'math {
  this
}

math_sub([heap]x'i32:, [heap]y'i32:)'i32 {
  this.x - this.y
}

global()'void {
  [stack]c'class : [stack]class([stack]this : class(
    [stack]m'math : [stack]math([stack]this : math())
  ))
  [heap]class_foo([stack]this : class_foo(
    parent: [stack]c,
    [heap]x'i32 : 4i
  ))
  void
}

